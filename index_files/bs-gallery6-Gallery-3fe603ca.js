define("@widget/GALLERY/bs-gallery6-Gallery-3fe603ca.js",["exports","~/c/bs-dataAids","@wsb/guac-widget-shared@^1/lib/components/DynamicFontScaler/component","~/c/bs-wrapWithDeviceDetection","~/c/bs-renderLightbox","~/c/bs-GalleryImage","~/c/bs-getAllCaptionText"],(function(e,t,a,o,l,r,i){"use strict";const{LARGE:n,MEDIUM:c,SMALL:s,XSMALL:g}=(global.Core||guac["@wsb/guac-widget-core"]).constants.fontSizes,d=[n,c,s,g],p=(global._||guac.lodash).uniqueId("caption-container-"),u=(global._||guac.lodash).uniqueId("caption-text-");var b=o.w(class extends(global.React||guac.react).Component{constructor(){super(...arguments),this.state={showLightbox:!1,showCaption:!1,selectedIndex:-1,page:1},this.hideLightbox=this.hideLightbox.bind(this),this.handleClick=this.handleClick.bind(this),this.loadMore=this.loadMore.bind(this)}static get propTypes(){return{id:(global.PropTypes||guac["prop-types"]).string,category:(global.PropTypes||guac["prop-types"]).string,device:(global.PropTypes||guac["prop-types"]).string,galleryImages:(global.PropTypes||guac["prop-types"]).array.isRequired,renderAsThumbnail:(global.PropTypes||guac["prop-types"]).bool,renderMode:(global.PropTypes||guac["prop-types"]).string,section:(global.PropTypes||guac["prop-types"]).string,size:(global.PropTypes||guac["prop-types"]).string,staticContent:(global.PropTypes||guac["prop-types"]).object}}generateStyles(e){return{container:{overflow:"hidden",position:"relative",cursor:"pointer",marginBottom:"small",":hover":{".dim":{opacity:1,transition:"all .3s"}}},overlay:{opacity:this.state.showCaption?1:0,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",position:"absolute",height:"100%",width:"100%",color:"highContrast",backgroundColor:"sectionOverlay",zIndex:"1",textAlign:"center",padding:"mobile"===e?"xsmall":"small",lineHeight:"mobile"===e?"1":"inherit",pointerEvents:"tablet"===e?"none":"auto"},fixedHeightImageStyles:{maxHeight:"660px",objectFit:"cover",width:"100%"},caption:{fontSize:"large",pointerEvents:"auto"}}}hideLightbox(){this.setState({showLightbox:!1})}handleClick(e){this.setState("mobile"===this.props.device?{showCaption:this.state.selectedIndex!==e||!this.state.showCaption,selectedIndex:e}:{showLightbox:!0,selectedIndex:e})}loadMore(e){e.stopPropagation(),this.setState({page:this.state.page+1})}renderSeeMoreText(){const{staticContent:e}=this.props;return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{style:{paddingVertical:"xlarge",textAlign:"center"}},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.MoreLink.Expand,{role:"button",tabIndex:"0",onClick:this.loadMore,"data-aid":t.d.GALLERY_MORE_BUTTON,children:e.showMore,"data-edit-interactive":!0}))}getCaptionText(e){let t;if(e)try{const a=JSON.parse(e);t=i.g(a)}catch(e){return null}return t}renderPages(e){const{galleryImages:o,device:l,renderMode:i}=this.props,{page:n,showCaption:c,selectedIndex:s}=this.state,g=e?3:6*n,b=this.generateStyles(l);return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid,{inset:!1},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Component.Grid.Cell,null,o.slice(0,g).map(((e,o)=>{let{image:n,caption:g,externalLink:h}=e;const m={imageData:n,style:b.fixedHeightImageStyles,"data-aid":t.a(o),...t.g(o,{isImage:!0})},y=this.getCaptionText(g),w=p+"-"+o,x=u+"-"+o,C=c&&s===o;return(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{key:o,style:b.container,onClick:!h&&this.handleClick.bind(this,o)},g&&"tablet"===l&&(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{style:b.overlay,className:"dim"},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Heading.Major,t._({style:b.caption,group:"Group",children:g,"data-aid":t.d.GALLERY_CAPTION_RENDERED},t.g(o,{isImage:!1}),{richtext:!0}))),g&&"mobile"===l&&(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Block,{id:w},(global.React||guac.react).createElement((global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Text,t._({font:"primary",children:y,id:x,style:{...b.overlay,display:C?"flex":"none"},renderMode:i,"data-aid":t.d.GALLERY_CAPTION_RENDERED},t.g(o,{isImage:!1}))),(global.React||guac.react).createElement(a.default,{font:"primary",text:y,containerId:w,targetId:x,fontSizes:d,maxLines:9,renderMode:i,Tag:(global.Core||guac["@wsb/guac-widget-core"]).UX2.Element.Text})),(global.React||guac.react).createElement(r.G,{imageProps:m,externalLink:h,background:!1}))}))))}render(){const{galleryImages:e,renderMode:t}=this.props,{page:a}=this.state,o=Math.ceil(e.length/6),r=t===(global.Core||guac["@wsb/guac-widget-core"]).constants.renderModes.DISPLAY,i=t===(global.Core||guac["@wsb/guac-widget-core"]).constants.renderModes.ADD,n=r||i;return(global.React||guac.react).createElement((global.React||guac.react).Fragment,null,e.length?this.renderPages(n):null,o>a&&!n?this.renderSeeMoreText():null,l.r.call(this))}});e.default=b,Object.defineProperty(e,"__esModule",{value:!0})})),"undefined"!=typeof window&&(window.global=window);
//# sourceMappingURL=bs-gallery6-Gallery-3fe603ca.js.map
